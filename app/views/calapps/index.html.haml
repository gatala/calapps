-#  This file is app/views/calapps/index.html.haml
%h1 Gallery Listview
%a.button.dropdown{:href=>"#", :data=>{:dropdown=>"drop"}} Actions
%ul#drop.f-dropdown{:data=>{"dropdown-content".to_sym=>true}}
  %li= link_to "Grid View", "/gallery"
  %li= link_to "Alphabetized View", "/list"
  - if is_admin?
    - if @pending 
      %li= link_to "Show Approved", "/calapps"
    - else
      %li= link_to "Show Pending", "/calapps?pending=>true"
  -if signed_in?
    %li= link_to "Add an Application", new_calapp_path
%table
  %thead
    %tr
      %th{:class => @name_header}= link_to "Name", calapps_path(:sort => "name"), :id => "name_header"
      %th{:class => @creator_header}= link_to "Creator(s)", calapps_path(:sort => "creator"), :id => "creator_header"
      %th= "Description"
      %th{:class => @updated_header}= link_to "Updated At", calapps_path(:sort => "updated_at"), :id => "updated_at"
      %th= "More Information"
  %tbody
    - @calapps.each do |calapp|
      %tr
        %td= link_to "#{calapp.name}", calapp.URL
        %td= calapp.creator
        %td= truncate(calapp.description, :length => 80, :separator => ' ')
        %td= calapp.updated_at.strftime("%b %-d, %Y")
        %td= link_to "More Details", calapp_path(calapp), :class => 'button tiny'
